{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": 420,
  "projection": {"type": "mercator", "fit": {"feature": "states"}},
  "layer": [
    {
      "data": {"name": "states"},
      "mark": {"type": "geoshape", "stroke": "#ffffff", "strokeWidth": 0.6},
      "encoding": {"tooltip": [{"field": "properties.name", "type": "nominal", "title": "State"}]}
    },
    {
      "data": {"name": "states"},
      "transform": [
        {"lookup": "properties.code", "from": {"data": {"name": "prf"}, "key": "state_code", "fields": ["prf_pct","prf_ha","state"]}}
      ],
      "mark": {"type": "geoshape"},
      "encoding": {
        "color": {
          "field": "prf_pct", "type": "quantitative",
          "title": "% of land in PRF",
          "scale": {"scheme": "greens", "type": "quantize", "domain": [0,60]},
          "legend": {"orient": "right"}
        },
        "tooltip": [
          {"field":"state","type":"nominal","title":"State"},
          {"field":"prf_ha","type":"quantitative","title":"PRF (ha)"},
          {"field":"prf_pct","type":"quantitative","title":"PRF %"}
        ]
      }
    }
  ]
}

